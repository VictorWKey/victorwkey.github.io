---
const {title, desc, technologies, img, webSite, repository, videoUrl, category, images} = Astro.props;

const hasImages = images && images.length > 0;
const hasRepository = repository && repository !== "#";
const hasWebSite = webSite && webSite !== "#";
const hasVideo = videoUrl && videoUrl !== "#";
const hasAnyLink = hasRepository || hasWebSite || hasVideo || hasImages;
---

<div class="card p-5 h-full flex flex-col">
  <!-- Category Badge -->
  <div class="mb-3">
    <span class="inline-block px-2.5 py-0.5 text-xs font-medium text-primary bg-primary-50 dark:bg-primary-900/20 rounded-md">
      {category}
    </span>
  </div>

  <!-- Project Image -->
  <figure class="w-full h-44 rounded-lg overflow-hidden mb-4 bg-gray-100 dark:bg-gray-700">
    <img class="w-full h-full object-cover" src={img} alt={title}>
  </figure>

  <!-- Content -->
  <div class="flex-1 flex flex-col">
    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">{title}</h3>
    <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-4 flex-1">{desc}</p>
    
    <!-- Technologies -->
    <div class="flex flex-wrap gap-1.5 mb-5">
      {technologies.map((tech: any) => {
        const TechComponent = tech.logo;
        return (
          <div class="group relative flex items-center gap-1.5 bg-gray-100 dark:bg-gray-700 rounded-md px-2 py-1.5">
            <div class="w-3.5 h-3.5">
              <TechComponent/>
            </div>
            <span class="text-xs text-gray-600 dark:text-gray-400">{tech.name}</span>
          </div>
        );
      })}
    </div>

    <!-- Action Buttons -->
    {hasAnyLink && (
      <div class="flex gap-2">
        {hasRepository && (
          <a 
            href={repository} 
            class="flex-1 py-2 px-3 text-sm font-medium text-center rounded-lg border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"
            target="_blank" 
            rel="noopener"
          >
            Repository
          </a>
        )}
        
        {hasWebSite && (
          <a 
            href={webSite} 
            class="flex-1 py-2 px-3 text-sm font-medium text-center rounded-lg bg-primary text-white hover:bg-primary-700 transition-colors duration-200"
            target="_blank" 
            rel="noopener"
          >
            Live Demo
          </a>
        )}
        
        {hasVideo && (
          <a 
            href={videoUrl} 
            class="flex-1 py-2 px-3 text-sm font-medium text-center rounded-lg border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"
            target="_blank" 
            rel="noopener"
          >
            Watch Video
          </a>
        )}
        
        {hasImages && (
          <button 
            onclick={`openProjectModal('${title}', ${JSON.stringify(images)})`}
            class="flex-1 py-2 px-3 text-sm font-medium text-center rounded-lg border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"
          >
            View Images
          </button>
        )}
      </div>
    )}

    {!hasAnyLink && (
      <div class="py-2 px-3 text-sm font-medium text-center rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500">
        Private Project
      </div>
    )}
  </div>
</div>

